<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
<%@ page import="com.lifechronicles.dao.StoryDAO" %>
<%@ page import="com.lifechronicles.dto.Story" %>
<%@ page import="java.text.SimpleDateFormat" %>
<% if (session.getAttribute("user_email")==null) { response.sendRedirect("index.jsp"); return; } String idParam=request.getParameter("id"); if (idParam==null || idParam.trim().isEmpty()) { response.sendRedirect("login.jsp"); return; } int storyId; try { storyId=Integer.parseInt(idParam); } catch (NumberFormatException e) { response.sendRedirect("login.jsp"); return; } StoryDAO storyDAO=new StoryDAO(); Story story=storyDAO.getStoryById(storyId); if (story==null) { response.sendRedirect("login.jsp"); return; } String date=new SimpleDateFormat("MMMM dd, yyyy").format(story.getCreatedAt()); %>
<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title><%= story.getTitle() %> - Life Chronicles</title><style>:root{--primary:#6c63ff}*{margin:0;padding:0}body{font-family:'Inter',sans-serif;background:#f9f9f9;line-height:1.8}.container{max-width:800px;margin:50px auto;padding:40px;background:#fff;border-radius:15px;box-shadow:0 5px 15px rgba(0,0,0,0.1)}h1{color:#333;font-size:2.5rem;margin-bottom:15px}.story-meta{display:flex;gap:15px;color:#666;margin-bottom:30px}.story-content{font-size:1.1rem;line-height:1.9;margin-bottom:30px;white-space:pre-wrap}.btn{padding:12px 24px;border-radius:8px;text-decoration:none;font-weight:600;background:#6c63ff;color:#fff}</style></head><body><div class="container"><h1><%= story.getTitle() %></h1><div class="story-meta"><span><%= story.getAuthorName() %></span><span>•</span><span><%= date %></span><% if (story.getCategory()!=null && !story.getCategory().isEmpty()) { %><span>•</span><span><%= story.getCategory() %></span><% } %></div><div class="story-content"><%= story.getContent() %></div><a href="login.jsp" class="btn">← Back to Dashboard</a></div></body></html>
